"use strict";var langList={Afrikaans:"af",Amharic:"am",Arabic:"ar",Azerbaijani:"az",Bashkir:"ba",Belarusian:"be",Bulgarian:"bg",Bengali:"bn",Bosnian:"bs",Catalan:"ca",Cebuano:"ceb",Czech:"cs",Welsh:"cy",Danish:"da",German:"de",Greek:"el",English:"en",Esperanto:"eo",Spanish:"es",Estonian:"et",Basque:"eu",Persian:"fa",Finnish:"fi",French:"fr",Irish:"ga","Scottish Gaelic":"gd",Galician:"gl",Gujarati:"gu",Hebrew:"he",Hindi:"hi",Croatian:"hr",Haitian:"ht",Hungarian:"hu",Armenian:"hy",Indonesian:"id",Icelandic:"is",Italian:"it",Japanese:"ja",Javanese:"jv",Georgian:"ka",Kazakh:"kk",Khmer:"km",Kannada:"kn",Korean:"ko",Kyrgyz:"ky",Latin:"la",Luxembourgish:"lb",Lao:"lo",Lithuanian:"lt",Latvian:"lv",Malagasy:"mg",Mari:"mhr",Maori:"mi",Macedonian:"mk",Malayalam:"ml",Mongolian:"mn",Marathi:"mr","Hill Mari":"mrj",Malay:"ms",Maltese:"mt",Burmese:"my",Nepali:"ne",Dutch:"nl",Norwegian:"no",Punjabi:"pa",Papiamento:"pap",Polish:"pl",Portuguese:"pt",Romanian:"ro",Russian:"ru",Sinhalese:"si",Slovak:"sk",Slovenian:"sl",Albanian:"sq",Serbian:"sr",Sundanese:"su",Swedish:"sv",Swahili:"sw",Tamil:"ta",Telugu:"te",Tajik:"tg",Thai:"th",Tagalog:"tl",Turkish:"tr",Tatar:"tt",Udmurt:"udm",Ukrainian:"uk",Urdu:"ur",Uzbek:"uz",Vietnamese:"vi",Xhosa:"xh",Yiddish:"yi",Chinese:"zh"},translateBtn=document.querySelector("#translatorBtn"),translatorInput=document.querySelector("#translatorInput"),languageReverseBtn=document.querySelector(".translator--reverseBtn"),outputLangBtn=document.querySelector("#outputLang"),inputLangBtn=document.querySelector("#inputLang"),modalContent=document.querySelector(".modal--content"),modalContainer=document.querySelector(".modal--container");function hideSidePage(){document.querySelector(".side--container").style.right="-100%"}function showSidePage(){document.querySelector(".side--container").style.right="0"}translateBtn.addEventListener("click",translateText,!1),translatorInput.addEventListener("keyup",sendToTranslate,!1),languageReverseBtn.addEventListener("click",reverseLanguages,!1),outputLangBtn.addEventListener("click",showModal,!1),inputLangBtn.addEventListener("click",showModal,!1),document.querySelector(".modal--overlay").addEventListener("click",closeModal,!1),modalContent.addEventListener("click",selectLanguage,!1),modalContainer.addEventListener("keypress",searchLanguage,!1),document.querySelector("#hideSide").addEventListener("click",hideSidePage,!1),document.querySelector("#showSide").addEventListener("click",showSidePage,!1),translatorInput.focus(),chrome.storage.sync.get(["inputLanguage","outputLanguage"],function(e){e.inputLanguage&&(inputLangBtn.innerHTML=e.inputLanguage),e.outputLanguage&&(outputLangBtn.innerHTML=e.outputLanguage)});var copyBtn=new ClipboardJS("#copyBtn");function translateText(){if(""!==translatorInput.value){var e=translatorInput.value.replace(/\s/g,"+"),n=langList[inputLangBtn.innerHTML],t=langList[outputLangBtn.innerHTML];fetch("https://translate.yandex.net/api/v1.5/tr.json/translate?key=trnsl.1.1.20180806T180405Z.a97df2323f4db674.6f2961e102f1e464ad056fafcaf6951b74a2fb26&text="+e+"&lang="+n+"-"+t).then(function(e){return e.json()}).then(function(e){document.querySelector(".translator--result").innerHTML=e.text[0]})}}function sendToTranslate(e){"Enter"===e.key&&translateText()}function reverseLanguages(){var e=document.querySelector("#inputLang"),n=document.querySelector("#outputLang"),t=[n.innerHTML,e.innerHTML];e.innerHTML=t[0],n.innerHTML=t[1],chrome.storage.sync.set({inputLanguage:e.innerHTML,outputLanguage:n.innerHTML})}function showModal(e){for(var n in document.querySelector("#translateInfo").innerHTML=e.target.dataset.langInfo,modalContent.innerHTML="",langList){var t='<button class="modal--language '+(e.target.innerHTML===n?"modal--language-selected":"")+'">'+n+"</button>";modalContent.innerHTML+=t}document.querySelector("#modal").classList.add("modal--overlay-opened"),setTimeout(function(){modalContainer.focus()},100)}function closeModal(e){"modal--overlay"!==e.target.classList[0]&&"modal--close"!==e.target.classList[0]||document.querySelector("#modal").classList.remove("modal--overlay-opened")}function selectLanguage(e){var n=e.target;"modal--language"===n.classList[0]&&("from"===document.querySelector("#translateInfo").innerHTML?(outputLangBtn.innerHTML===n.innerHTML&&(outputLangBtn.innerHTML=inputLangBtn.innerHTML),inputLangBtn.innerHTML=n.innerHTML,chrome.storage.sync.set({inputLanguage:n.innerHTML})):(inputLangBtn.innerHTML===n.innerHTML&&(inputLangBtn.innerHTML=outputLangBtn.innerHTML),outputLangBtn.innerHTML=n.innerHTML,chrome.storage.sync.set({outputLanguage:n.innerHTML})),document.querySelector("#modal").classList.remove("modal--overlay-opened"))}function searchLanguage(n){for(var e=document.querySelectorAll(".modal--language"),t=Array.from(e).filter(function(e){return e.innerHTML[0].toLowerCase()===n.key}),a=0,r=t.length;a<r;a++)if(document.activeElement===t[a]){a+1===r?t[0].focus():t[a+1].focus();break}0===t.filter(function(e){return document.activeElement===e}).length&&t[0].focus()}function removeClass(e,n){e.classList.remove(n)}copyBtn.on("success",function(n){console.info("Action:",n.action),console.info("Text:",n.text),console.info("Trigger:",n.trigger),n.trigger.classList.add("tooltip"),["blur","mouseleave"].forEach(function(e){n.trigger.addEventListener(e,function(){return removeClass(n.trigger,"tooltip")},!1)}),n.clearSelection()});